<div class="wrapper wrapper-content animated fadeInRight">
    <div class="row">
        <div class="col-lg-12">
            <div class="ibox float-e-margins">
                <div class="ibox-title">
                    <h5 langtag="word-clientdownloads"></h5>
                    <div class="ibox-tools">
                        <a class="collapse-link">
                            <i class="fa fa-chevron-up"></i>
                        </a>
                        <a class="close-link">
                            <i class="fa fa-times"></i>
                        </a>
                    </div>
                </div>
                <div class="ibox-content">
                    <p>轻松获取 NPS 客户端，开启您的内网穿透之旅。我们提供命令行 (CLI) 和图形用户界面 (GUI) 两种客户端，满足不同用户需求。</p>
                    
                    <div class="tabs-container">
                        <ul class="nav nav-tabs" role="tablist">
                            <li class="active">
                                <a data-toggle="tab" href="#linux-tab">
                                    <i class="fa fa-linux"></i> Linux
                                </a>
                            </li>
                            <li>
                                <a data-toggle="tab" href="#windows-tab">
                                    <i class="fa fa-windows"></i> Windows
                                </a>
                            </li>
                            <li>
                                <a data-toggle="tab" href="#macos-tab">
                                    <i class="fa fa-apple"></i> macOS
                                </a>
                            </li>
                        </ul>

                        <div class="tab-content">
                            <!-- Linux Tab -->
                            <div class="tab-pane active" id="linux-tab" role="tabpanel">
                                <div class="panel-body">
                                    <div class="table-responsive">
                                        <table class="table table-striped table-hover">
                                            <thead>
                                                <tr>
                                                    <th>架构</th>
                                                    <th>CLI 客户端</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <tr>
                                                    <td><i class="fa fa-microchip"></i> amd64 (64位)</td>
                                                    <td>
                                                        <a href="{{.web_base_url}}/linux_amd64_client.tar.gz" download class="btn btn-primary dim">
                                                            <i class="fa fa-download"></i> 下载 (amd64)
                                                        </a>
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td><i class="fa fa-microchip"></i> arm64 (ARM 64位)</td>
                                                    <td>
                                                        <a href="{{.web_base_url}}/linux_arm64_client.tar.gz" download class="btn btn-primary dim">
                                                            <i class="fa fa-download"></i> 下载 (arm64)
                                                        </a>
                                                    </td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                    
                                    <div class="m-t-lg">
                                        <h4>Linux 安装与运行指南 (CLI)</h4>
                                        <div class="panel-group" id="linux-accordion">
                                            <div class="panel panel-default">
                                                <div class="panel-heading">
                                                    <h5 class="panel-title">
                                                        <a data-toggle="collapse" data-parent="#linux-accordion" href="#step1-linux">
                                                            <i class="fa fa-download"></i> 1. 下载客户端
                                                        </a>
                                                    </h5>
                                                </div>
                                                <div id="step1-linux" class="panel-collapse collapse in">
                                                    <div class="panel-body">
                                                        <p>根据您的 Linux 系统处理器架构（通常是 <code>amd64</code> 或 <code>arm64</code>），点击上方表格中对应的"下载"按钮，将客户端压缩包保存到您的计算机（例如，下载到 <code>~/Downloads</code> 目录）。</p>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="panel panel-default">
                                                <div class="panel-heading">
                                                    <h5 class="panel-title">
                                                        <a data-toggle="collapse" data-parent="#linux-accordion" href="#step2-linux">
                                                            <i class="fa fa-archive"></i> 2. 解压客户端
                                                        </a>
                                                    </h5>
                                                </div>
                                                <div id="step2-linux" class="panel-collapse collapse">
                                                    <div class="panel-body">
                                                        <p>打开终端（Terminal），导航到您下载文件的目录。然后使用 <code>tar</code> 命令解压文件。请将 <code>linux_amd64_client.tar.gz</code> 替换为您实际下载的文件名：</p>
                                                        <pre><code class="language-bash">cd ~/Downloads
tar -zxvf linux_amd64_client.tar.gz</code></pre>
                                                        <p>解压后，您会得到一个名为 <code>npc</code> 的可执行文件。</p>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="panel panel-default">
                                                <div class="panel-heading">
                                                    <h5 class="panel-title">
                                                        <a data-toggle="collapse" data-parent="#linux-accordion" href="#step3-linux">
                                                            <i class="fa fa-key"></i> 3. 赋予执行权限
                                                        </a>
                                                    </h5>
                                                </div>
                                                <div id="step3-linux" class="panel-collapse collapse">
                                                    <div class="panel-body">
                                                        <p>为了能够运行 <code>npc</code>，您需要为其添加执行权限：</p>
                                                        <pre><code class="language-bash">chmod +x npc</code></pre>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="panel panel-default">
                                                <div class="panel-heading">
                                                    <h5 class="panel-title">
                                                        <a data-toggle="collapse" data-parent="#linux-accordion" href="#step4-linux">
                                                            <i class="fa fa-play-circle"></i> 4. 运行客户端
                                                        </a>
                                                    </h5>
                                                </div>
                                                <div id="step4-linux" class="panel-collapse collapse">
                                                    <div class="panel-body">
                                                        <p>直接在终端中运行客户端：</p>
                                                        <pre><code class="language-bash">./npc</code></pre>
                                                        <p>首次运行 <code>npc</code> 时，它会提示您输入 NPS 服务器的地址（例如：<code>your_server_ip:8024</code>）和验证密钥（<code>vkey</code>）。请按照提示输入正确的信息。</p>
                                                        <p><strong>提示</strong>：您也可以通过配置文件来启动客户端，具体请参考官方文档。</p>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Windows Tab -->
                            <div class="tab-pane" id="windows-tab" role="tabpanel">
                                <div class="panel-body">
                                    <div class="table-responsive">
                                        <table class="table table-striped table-hover">
                                            <thead>
                                                <tr>
                                                    <th>架构</th>
                                                    <th>CLI 客户端</th>
                                                    <th>GUI 客户端</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <tr>
                                                    <td><i class="fa fa-microchip"></i> amd64 (64位)</td>
                                                    <td>
                                                        <a href="{{.web_base_url}}/windows_amd64_client.zip" download class="btn btn-primary dim">
                                                            <i class="fa fa-download"></i> 下载 (amd64)
                                                        </a>
                                                    </td>
                                                    <td>
                                                        <a href="{{.web_base_url}}/windows_amd64_gui_client.zip" download class="btn btn-info dim">
                                                            <i class="fa fa-download"></i> 下载 GUI (amd64)
                                                        </a>
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td><i class="fa fa-microchip"></i> arm64 (ARM 64位)</td>
                                                    <td>
                                                        <a href="{{.web_base_url}}/windows_arm64_client.zip" download class="btn btn-primary dim">
                                                            <i class="fa fa-download"></i> 下载 (arm64)
                                                        </a>
                                                    </td>
                                                    <td>
                                                        <a href="{{.web_base_url}}/windows_arm64_gui_client.zip" download class="btn btn-info dim">
                                                            <i class="fa fa-download"></i> 下载 GUI (arm64)
                                                        </a>
                                                    </td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                    
                                    <div class="m-t-lg">
                                        <h4>Windows 安装与运行指南 (CLI)</h4>
                                        <div class="panel-group" id="windows-cli-accordion">
                                            <div class="panel panel-default">
                                                <div class="panel-heading">
                                                    <h5 class="panel-title">
                                                        <a data-toggle="collapse" data-parent="#windows-cli-accordion" href="#step1-windows-cli">
                                                            <i class="fa fa-download"></i> 1. 下载客户端
                                                        </a>
                                                    </h5>
                                                </div>
                                                <div id="step1-windows-cli" class="panel-collapse collapse in">
                                                    <div class="panel-body">
                                                        <p>根据您的 Windows 系统处理器架构，点击上方表格中对应的"下载"按钮，将客户端 ZIP 压缩包保存到您的计算机。</p>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="panel panel-default">
                                                <div class="panel-heading">
                                                    <h5 class="panel-title">
                                                        <a data-toggle="collapse" data-parent="#windows-cli-accordion" href="#step2-windows-cli">
                                                            <i class="fa fa-archive"></i> 2. 解压客户端
                                                        </a>
                                                    </h5>
                                                </div>
                                                <div id="step2-windows-cli" class="panel-collapse collapse">
                                                    <div class="panel-body">
                                                        <p>找到下载的 ZIP 文件，右键点击选择"全部提取"或使用您常用的解压工具（如 WinRAR, 7-Zip）将其解压到一个您方便的目录（例如：<code>C:\nps-client</code>）。解压后，您会得到一个名为 <code>npc.exe</code> 的可执行文件。</p>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="panel panel-default">
                                                <div class="panel-heading">
                                                    <h5 class="panel-title">
                                                        <a data-toggle="collapse" data-parent="#windows-cli-accordion" href="#step3-windows-cli">
                                                            <i class="fa fa-play-circle"></i> 3. 运行客户端
                                                        </a>
                                                    </h5>
                                                </div>
                                                <div id="step3-windows-cli" class="panel-collapse collapse">
                                                    <div class="panel-body">
                                                        <p>打开命令提示符 (CMD) 或 PowerShell，导航到您解压客户端的目录：</p>
                                                        <pre><code class="language-cmd">cd C:\nps-client</code></pre>
                                                        <p>然后，运行客户端：</p>
                                                        <pre><code class="language-cmd">npc.exe</code></pre>
                                                        <p>首次运行 <code>npc.exe</code> 时，它会提示您输入 NPS 服务器的地址和验证密钥。请按照提示输入正确的信息。</p>
                                                        <p><strong>提示</strong>：您也可以通过配置文件来启动客户端，具体请参考官方文档。</p>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        
                                        <h4 class="m-t-lg">Windows 安装与运行指南 (GUI)</h4>
                                        <div class="panel-group" id="windows-gui-accordion">
                                            <div class="panel panel-default">
                                                <div class="panel-heading">
                                                    <h5 class="panel-title">
                                                        <a data-toggle="collapse" data-parent="#windows-gui-accordion" href="#step1-windows-gui">
                                                            <i class="fa fa-download"></i> 1. 下载客户端
                                                        </a>
                                                    </h5>
                                                </div>
                                                <div id="step1-windows-gui" class="panel-collapse collapse in">
                                                    <div class="panel-body">
                                                        <p>根据您的 Windows 系统处理器架构，点击上方表格中对应的"下载 GUI"按钮，将客户端 ZIP 压缩包保存到您的计算机。</p>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="panel panel-default">
                                                <div class="panel-heading">
                                                    <h5 class="panel-title">
                                                        <a data-toggle="collapse" data-parent="#windows-gui-accordion" href="#step2-windows-gui">
                                                            <i class="fa fa-archive"></i> 2. 解压客户端
                                                        </a>
                                                    </h5>
                                                </div>
                                                <div id="step2-windows-gui" class="panel-collapse collapse">
                                                    <div class="panel-body">
                                                        <p>找到下载的 ZIP 文件，右键点击选择"全部提取"或使用您常用的解压工具将其解压到一个您方便的目录。解压后，您会得到一个名为 <code>npc_gui.exe</code> 的可执行文件。</p>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="panel panel-default">
                                                <div class="panel-heading">
                                                    <h5 class="panel-title">
                                                        <a data-toggle="collapse" data-parent="#windows-gui-accordion" href="#step3-windows-gui">
                                                            <i class="fa fa-play-circle"></i> 3. 运行客户端
                                                        </a>
                                                    </h5>
                                                </div>
                                                <div id="step3-windows-gui" class="panel-collapse collapse">
                                                    <div class="panel-body">
                                                        <p>双击 <code>npc_gui.exe</code> 即可运行图形界面客户端。首次运行会引导您进行服务器地址和验证密钥的配置。按照界面提示进行操作即可。</p>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- macOS Tab -->
                            <div class="tab-pane" id="macos-tab" role="tabpanel">
                                <div class="panel-body">
                                    <div class="table-responsive">
                                        <table class="table table-striped table-hover">
                                            <thead>
                                                <tr>
                                                    <th>架构</th>
                                                    <th>CLI 客户端</th>
                                                    <th>GUI 客户端</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <tr>
                                                    <td><i class="fa fa-microchip"></i> amd64 (Intel 芯片)</td>
                                                    <td>
                                                        <a href="{{.web_base_url}}/darwin_amd64_client.tar.gz" download class="btn btn-primary dim">
                                                            <i class="fa fa-download"></i> 下载 (amd64)
                                                        </a>
                                                    </td>
                                                    <td>
                                                        <a href="{{.web_base_url}}/darwin_amd64_gui_client.tar.gz" download class="btn btn-info dim">
                                                            <i class="fa fa-download"></i> 下载 GUI (amd64)
                                                        </a>
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td><i class="fa fa-microchip"></i> arm64 (Apple 芯片)</td>
                                                    <td>
                                                        <a href="{{.web_base_url}}/darwin_arm64_client.tar.gz" download class="btn btn-primary dim">
                                                            <i class="fa fa-download"></i> 下载 (arm64)
                                                        </a>
                                                    </td>
                                                    <td>
                                                        <a href="{{.web_base_url}}/darwin_arm64_gui_client.tar.gz" download class="btn btn-info dim">
                                                            <i class="fa fa-download"></i> 下载 GUI (arm64)
                                                        </a>
                                                    </td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                    
                                    <div class="m-t-lg">
                                        <h4>macOS 安装与运行指南 (CLI)</h4>
                                        <div class="panel-group" id="macos-cli-accordion">
                                            <div class="panel panel-default">
                                                <div class="panel-heading">
                                                    <h5 class="panel-title">
                                                        <a data-toggle="collapse" data-parent="#macos-cli-accordion" href="#step1-macos-cli">
                                                            <i class="fa fa-download"></i> 1. 下载客户端
                                                        </a>
                                                    </h5>
                                                </div>
                                                <div id="step1-macos-cli" class="panel-collapse collapse in">
                                                    <div class="panel-body">
                                                        <p>根据您的 macOS 系统处理器架构（Intel 芯片选择 <code>amd64</code>，Apple 芯片选择 <code>arm64</code>），点击上方表格中对应的"下载"按钮，将客户端压缩包保存到您的计算机。</p>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="panel panel-default">
                                                <div class="panel-heading">
                                                    <h5 class="panel-title">
                                                        <a data-toggle="collapse" data-parent="#macos-cli-accordion" href="#step2-macos-cli">
                                                            <i class="fa fa-archive"></i> 2. 解压客户端
                                                        </a>
                                                    </h5>
                                                </div>
                                                <div id="step2-macos-cli" class="panel-collapse collapse">
                                                    <div class="panel-body">
                                                        <p>打开终端（Terminal），导航到您下载文件的目录。然后使用 <code>tar</code> 命令解压文件：</p>
                                                        <pre><code class="language-bash">cd ~/Downloads
tar -zxvf darwin_amd64_client.tar.gz</code></pre>
                                                        <p>解压后，您会得到一个名为 <code>npc</code> 的可执行文件。</p>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="panel panel-default">
                                                <div class="panel-heading">
                                                    <h5 class="panel-title">
                                                        <a data-toggle="collapse" data-parent="#macos-cli-accordion" href="#step3-macos-cli">
                                                            <i class="fa fa-key"></i> 3. 赋予执行权限
                                                        </a>
                                                    </h5>
                                                </div>
                                                <div id="step3-macos-cli" class="panel-collapse collapse">
                                                    <div class="panel-body">
                                                        <p>为了能够运行 <code>npc</code>，您需要为其添加执行权限：</p>
                                                        <pre><code class="language-bash">chmod +x npc</code></pre>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="panel panel-default">
                                                <div class="panel-heading">
                                                    <h5 class="panel-title">
                                                        <a data-toggle="collapse" data-parent="#macos-cli-accordion" href="#step4-macos-cli">
                                                            <i class="fa fa-play-circle"></i> 4. 运行客户端
                                                        </a>
                                                    </h5>
                                                </div>
                                                <div id="step4-macos-cli" class="panel-collapse collapse">
                                                    <div class="panel-body">
                                                        <p>直接在终端中运行客户端：</p>
                                                        <pre><code class="language-bash">./npc</code></pre>
                                                        <p>首次运行 <code>npc</code> 时，它会提示您输入 NPS 服务器的地址和验证密钥。请按照提示输入正确的信息。</p>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        
                                        <h4 class="m-t-lg">macOS 安装与运行指南 (GUI)</h4>
                                        <div class="panel-group" id="macos-gui-accordion">
                                            <div class="panel panel-default">
                                                <div class="panel-heading">
                                                    <h5 class="panel-title">
                                                        <a data-toggle="collapse" data-parent="#macos-gui-accordion" href="#step1-macos-gui">
                                                            <i class="fa fa-download"></i> 1. 下载客户端
                                                        </a>
                                                    </h5>
                                                </div>
                                                <div id="step1-macos-gui" class="panel-collapse collapse in">
                                                    <div class="panel-body">
                                                        <p>根据您的 macOS 系统处理器架构，点击上方表格中对应的"下载 GUI"按钮，将客户端压缩包保存到您的计算机。</p>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="panel panel-default">
                                                <div class="panel-heading">
                                                    <h5 class="panel-title">
                                                        <a data-toggle="collapse" data-parent="#macos-gui-accordion" href="#step2-macos-gui">
                                                            <i class="fa fa-archive"></i> 2. 解压客户端
                                                        </a>
                                                    </h5>
                                                </div>
                                                <div id="step2-macos-gui" class="panel-collapse collapse">
                                                    <div class="panel-body">
                                                        <p>找到下载的压缩包，双击即可解压。解压后，您会得到一个名为 <code>npc_gui</code> 的应用程序。</p>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="panel panel-default">
                                                <div class="panel-heading">
                                                    <h5 class="panel-title">
                                                        <a data-toggle="collapse" data-parent="#macos-gui-accordion" href="#step3-macos-gui">
                                                            <i class="fa fa-play-circle"></i> 3. 运行客户端
                                                        </a>
                                                    </h5>
                                                </div>
                                                <div id="step3-macos-gui" class="panel-collapse collapse">
                                                    <div class="panel-body">
                                                        <p>双击 <code>npc_gui</code> 应用程序即可运行图形界面客户端。首次运行会引导您进行服务器地址和验证密钥的配置。按照界面提示进行操作即可。</p>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="text-center m-t-xl">
                        <p>更多详细和高级的安装说明，请参考我们的官方<a href="https://ehang-io.github.io/nps/#/install" target="_blank">文档</a>。</p>
                        <p class="text-muted">如在下载或安装过程中遇到问题，请联系技术支持或查看FAQ。</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    $(document).ready(function () {
        // 标签页切换功能
        $('a[data-toggle="tab"]').on('shown.bs.tab', function (e) {
            var target = $(e.target).attr("href"); // activated tab
            console.log('切换到标签页: ' + target);
        });
        
        // 确保折叠面板功能正常工作
        $('.panel-collapse').on('show.bs.collapse', function () {
            $(this).siblings('.panel-heading').find('a i').removeClass('fa-chevron-down').addClass('fa-chevron-up');
        });
        
        $('.panel-collapse').on('hide.bs.collapse', function () {
            $(this).siblings('.panel-heading').find('a i').removeClass('fa-chevron-up').addClass('fa-chevron-down');
        });
    });
</script>

<!-- 添加额外的CSS样式确保标签页正确显示 -->
<style>
    .tab-content > .tab-pane {
        display: none;
    }
    .tab-content > .active {
        display: block;
    }
</style>
